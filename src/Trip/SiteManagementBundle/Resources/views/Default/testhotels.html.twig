{% extends 'TripSiteManagementBundle:Default:index.html.twig' %}
{% block javascripts %}
<script>
var room = $('.guests-room').html();
$("#guests-box").on('click','.add-room',function(e){
	e.preventDefault();    	
    	//alert(room);
    	var roomCount = parseInt($(this).attr('value'));
    	var adultCount = parseInt($('#trip_hotel_search_numAdult').val());
    	
    	if(roomCount==4){
        	alert("You reached maximum rooms allowed per booking");
        	exit();
    	}
    	roomCount+=1;    	
    	$(this).attr('value',roomCount);
    	$('.guests-room').append("<h5>Room "+roomCount+"</h5>");
    	$('.guests-room').append(room);
    	$('#trip_hotel_search_numRooms').val(roomCount);
    	$('#trip_hotel_search_numAdult').val(adultCount+1);
    	 var totalAdultCount = parseInt($('#trip_hotel_search_numAdult').val());
    	 
    	 var totalChildCount = parseInt($('#trip_hotel_search_numChildren').val());
    	var guests = totalAdultCount + totalChildCount;
    	var guestsText = guests+' Guests, '+roomCount+' Rooms';
    	$('#guests').val(guestsText);

    	e.preventDefault();
   	
});
$("#guests-box").on('click','.adults',function(e){	
	e.preventDefault(); //STOP default action 
	 var id = $(this).attr('id');
	 var value = parseInt($(this).attr('value'));
	// var value = 3;
	 var totalAdultCount = parseInt($('#trip_hotel_search_numAdult').val());
	 //alert(totalAdultCount);
	 var totalChildCount = parseInt($('#trip_hotel_search_numChildren').val());
	 var roomCount = parseInt($('#trip_hotel_search_numRooms').val());
	 var adultsCount = $(this).closest('.row').find('.adults-count');
	 var adults =parseInt( $(adultsCount).html());
	 if (isNaN(adults)) { 
		 adults= 0
        } 
	// alert(adults);
	 if(id=='decrement'){
		 adults-=1;
		 totalAdultCount-=1;
		 if(adults>=1) $(adultsCount).html(adults); else exit();
	  }else{
		adults+=1;
		totalAdultCount+=1;
	    if(adults<=2)  $(adultsCount).html(adults); else exit();
		}
	 $('#trip_hotel_search_numAdult').val(totalAdultCount);
	 var guests = totalAdultCount + totalChildCount;
 	var guestsText = guests+' Guests, '+roomCount+' Rooms';
 	$('#guests').val(guestsText);	
});
$("#guests-box").on('click','.children',function(e){	
	e.preventDefault(); //STOP default action 
	 var id = $(this).attr('id');
	 var value = parseInt($(this).attr('value'));
	 var totalAdultCount = parseInt($('#trip_hotel_search_numAdult').val());
	 var totalChildCount = parseInt($('#trip_hotel_search_numChildren').val());
	 var childrenCount = $(this).closest('.row').find('.children-count');
	 var roomCount = parseInt($('#trip_hotel_search_numRooms').val());
	 var children =parseInt( $(childrenCount).html());
	 if (isNaN(children)) { 
		 children= 0
        } 
	 if(id=='decrement'){
		 children-=1;
		 totalChildCount-=1;
		 if(children>=0) $(childrenCount).html(children); else exit();
	  }else{
		  children+=1;
		  totalChildCount+=1;
	    if(children<=2)  $(childrenCount).html(children); else exit();
		}
	 $('#trip_hotel_search_numChildren').val(totalChildCount);
	 var guests = totalAdultCount + totalChildCount;
 	var guestsText = guests+' Guests, '+roomCount+' Rooms';
 	$('#guests').val(guestsText);
});


$('#guests').click(function(e){
	//var room = $('#guests-room').html();
	//$('#guests-room').next(room);
	e.preventDefault();
    	 $('#guests').popover({
    		    placement: "bottom",
    		    trigger: "manual",
    		    html : true,
    		    content: $("#popover-content").html()
    		}).popover("show");


        
    });

    
$("#guests-box").on('click','.guestclose',function(e){ 
	 e.preventDefault(); //STOP default action 
	 //alert('hi');
	 $('#guests').popover('hide');
	
	/* var x = document.getElementById("guestsclosediv");
	
	 
	   if (x.style.display === "none") {
	         x.style.display = "block";
	     } else {
	         
	    	 x.style.display = "none";
	         
	     } */
	}); 


$(function () {

	// implementation of disabled form fields
	
});

	    
    </script>
    <script>

$(document).ready(function() {
    // Configure/customize these variables.
    var showChar = 100;  // How many characters are shown by default
    var ellipsestext = "...";
    var moretext = "Show more >";
    var lesstext = "Show less";
    

    $('.more').each(function() {
        var content = $(this).html();
 
        if(content.length > showChar) {
 
            var c = content.substr(0, showChar);
            var h = content.substr(showChar, content.length - showChar);
 
            var html = c + '<span class="moreellipses">' + ellipsestext+ '&nbsp;</span><span class="morecontent"><span>' + h + '</span>&nbsp;&nbsp;<a href="" class="morelink">' + moretext + '</a></span>';
 
            $(this).html(html);
        }
 
    });
 
    $(".morelink").click(function(){
        if($(this).hasClass("less")) {
            $(this).removeClass("less");
            $(this).html(moretext);
        } else {
            $(this).addClass("less");
            $(this).html(lesstext);
        }
        $(this).parent().prev().toggle();
        $(this).prev().toggle();
        return false;
    });
});

</script>
    {% endblock %}
{% block navTabs %}
                        <ul class="nav nav-tabs" role="tablist">
                            <li><a href="#tab_01" aria-controls="tab_01" role="tab" data-toggle="tab"><i class="icon-sedan3"></i>  Cars</a></li>
                            <li class="active"><a href="#tab_02" aria-controls="tab_02" role="tab" data-toggle="tab"><i class="icon-hotel68"></i>   Hotels</a></li>
                            <li><a href="#tab_03" aria-controls="tab_03" role="tab" data-toggle="tab"><i class="icon-bag"></i>  Packages</a></li>
                            
                            <li><a href="#tab_04" aria-controls="tab_04" role="tab" data-toggle="tab"><i class="icon-travel25"></i>  Deals</a></li>
                            
                        </ul>


                     <div class="tab-content">
                            <div role="tabpanel" class="tab-pane" id="tab_01">
                            {{ form_start(form) }}
				           {{ form_errors(form, { 'global_errors': true }) }}
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                    <h3>  Book Your Cab Now</h3>
                                    </div>
                                </div>
                                <div class="row tripNav">
                                    <span>
                                         <label for="oneway" class="tripSel">
                                             <input type="radio" name="tripType" value="oneway" id="oneway" style="display:none"> 
                                             One Way
                                         </label>
                                    </span>
                                    <span>
                                        <label for="roundtrip">
                                            <input type="radio" name="tripType" value="roundtrip" id="roundtrip" style="display:none">
                                            Round Trip
                                        </label>
                                    </span>
                                    <span>
                                         <label for="multicity">
                                            <input type="radio" name="tripType" value="multicity" id="multicity" style="display:none">
                                            Multicity
                                        </label>
                                    </span>
                                </div>
 <div class="row" id="genaral">
                                    <div class="form-group make-margin fil col-md-6 col-sm-6 col-xs-12">
                                         {{ form_label(form.leavingFrom) }}
                                         <div class="dropdown">
                                             {{ form_widget(form.leavingFrom) }}
                                        </div>
                                       
                                    </div>
                                    {#
                                    <div class="form-group make-margin fil col-md-2 col-sm-2 col-xs-2">
                                         <i class="fa fa-arrow-left"></i><i class="fa fa-arrow-right"></i>
                                    </div>
                                    #}
                                    <div class="form-group make-margin fil col-md-6 col-sm-6 col-xs-12">
                                         {{ form_label(form.goingTo) }}
                                         <div class="dropdown">
                                             {{ form_widget(form.goingTo) }}                
                                        </div>
                                    </div>
                                    <div class="form-group make-margin fil col-md-6 col-sm-6 col-xs-12">
                                        {{ form_label(form.date) }} 
                                        <div class="input-group">
                                            {{ form_widget(form.date) }} 
                                            <div class="input-group-addon"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div>
                                    <div class="form-group make-margin fil col-md-6 col-sm-6 col-xs-12">
                                         {{ form_label(form.returnDate) }}
                                        <div class="input-group">
                                            {{ form_widget(form.returnDate) }}          
                                            
                                              
                                            <div class="input-group-addon"><i class="fa fa-calendar"></i></div>
                                        </div>
                                    </div> 
                                </div>
                                    <div style="display:none" class="row" id="multipleCity">
                                    
                                    
                                         {% macro information_prototype(multiCity) %}
                                    
                                    
                                            <div class="form-group make-margin fil col-md-4 col-sm-4 col-xs-12">
                                                 {{ form_label(multiCity.leavingFrom) }}
                                                 <div class="dropdown">
                                                     {{ form_widget(multiCity.leavingFrom) }}
                                                </div>

                                            </div>
                                    
                                            <div class="form-group make-margin fil col-md-4 col-sm-4 col-xs-12">
                                                                                                     
                                                    {{ form_label(multiCity.goingTo) }}
                                                   
                                                    <div class="dropdown">
                                                    {{ form_widget(multiCity.goingTo) }}
                                                   </div>
                                             </div>
                                            <div class="form-group make-margin fil col-md-4 col-sm-4 col-xs-12">
                                                 {{ form_label(multiCity.date) }}
                                                 <div class="input-group">
                                                     {{ form_widget(multiCity.date) }}
                                                </div>

                                            </div>
                                           
                                        {% endmacro %}
                                         <div id="city-fields-list"
                                                data-prototype="{{ _self.information_prototype(form.multiple.vars.prototype)|e }}">
                                            {% for multiCity in form.multiple %}
                                             <div class="form-group make-margin fil col-md-4 col-sm-4 col-xs-12">
                                                 {{ form_label(multiCity.leavingFrom) }}
                                                 <div class="dropdown">
                                                     {{ form_widget(multiCity.leavingFrom) }}
                                                </div>

                                            </div>
                                    
                                            <div class="form-group make-margin fil col-md-4 col-sm-4 col-xs-12">
                                                                                                     
                                                    {{ form_label(multiCity.goingTo) }}
                                                   
                                                    <div class="dropdown">
                                                    {{ form_widget(multiCity.goingTo) }}
                                                   </div>
                                             </div>
                                            <div class="form-group make-margin fil col-md-4 col-sm-4 col-xs-12">
                                                 {{ form_label(multiCity.date) }}
                                                 <div class="input-group">
                                                     {{ form_widget(multiCity.date) }}
                                                </div>

                                            </div>
                                            {% endfor %}
                                    </div>
                                    
                                     <div class="form-group make-margin fil col-md-6 col-sm-6 col-xs-12">
                                       {# <div class="row">
                                          <div class="col-md-6 col-sm-6 col-xs-6">
                                            {{ form_label(form.numDays) }}
                                         </div>
                                         <div class="col-md-6 col-sm-6 col-xs-6">
                                                 <div class="input-group">
                                                     <a class="days input-group-addon" id="decrement" value="1" href="#">-</a> 
                                                        {{ form_widget(form.numDays) }}
                                                      <a class="days input-group-addon" id="increment" href="#">+</a>
                                                </div>
                                         </div>
                                        </div> #}
                                    </div>
                                    <div class="form-group make-margin fil col-md-6 col-sm-6 col-xs-12">
                                     <a href="#" id="add-another-city">Add another city</a>
                                    
                                    </div>
                                </div>
                                <div class="row">
                                     <div class="form-group make-margin fil col-md-6 col-sm-6 col-xs-12">
                                        <div class="row">
                                              <div class="col-md-6 col-sm-6 col-xs-6">
                                                {{ form_label(form.numAdult) }}
                                             </div>
                                             <div class="col-md-6 col-sm-6 col-xs-6">
                                                     <div class="input-group">
                                                         <a class="adults input-group-addon" id="decrement" value="1" href="#">-</a> 
                                                            {{ form_widget(form.numAdult) }}
                                                         <a class="adults input-group-addon" id="increment" href="#">+</a>
                                                    </div>
                                             </div>
                                         </div>
                                    </div>
                                     <div class="form-group make-margin fil col-md-6 col-sm-6 col-xs-12">
                                        <div class="row">
                                              <div class="col-md-6 col-sm-6 col-xs-6">
                                                {{ form_label(form.preferTime) }}
                                              </div>
                                             <div class="col-md-6 col-sm-6 col-xs-6">
                                                {{ form_widget(form.preferTime) }}
                                             </div>
                                         </div>
                                    </div>
                                   </div>
                                <div class="row">
                                    <div class="form-group col-md-12 col-sm-6 col-xs-12">
                                        <button type="submit" class="btn btn-primary btn-block"><i class="icon-search"></i> Search </button>
                                    </div>
                                </div>
                                {{ form_end(form) }}
                                
                            </div><!-- end tab-pane -->

                            <div role="tabpanel" class="tab-pane" id="tab_03">
                                <h6>WHEN WOULD YOU LIKE TO GO?</h6>
                                <form class="bookform form-inline row">
                                    <div class="form-group col-md-12 col-sm-6 col-xs-12">
                                        <input type="text" class="form-control" placeholder=" Destination: Country, City,Airport...">
                                    </div>
                                    <div class="form-group col-md-12 col-sm-6 col-xs-12">
                                        <input type="text" class="form-control" placeholder=" Hotel: TUNAI, HAWAI...">
                                    </div>
                                    <div class="form-group col-md-12 col-sm-6 col-xs-12">
                                        <input type="text" class="form-control" placeholder=" Time: May, Jun, Jully...">
                                    </div>

                                    <div class="form-group col-md-12 col-sm-6 col-xs-12">
                                        <button type="submit" class="btn btn-primary btn-block"><i class="icon-search"></i> BOOK NOW</button>
                                    </div>
                                </form>
                            </div><!-- end tab-pane -->

                           <div id="search-form" class="row search-form-boxnew">
                    {{ form_start(hotelForm) }}
                    
           <div class="col-lg-12 col-sm-12 form-group has-error">
			<ul class="errors">
	            {{ form_errors(hotelForm, { 'global_errors': true }) }}
	          
	          
            </ul>
			</div>
                    
                    
                     <span class="city select-box">
                        {{ form_widget(hotelForm.goingTo) }}
                      </span>
                      <span class=" " id="checkIn">
                      	
                        {{ form_widget(hotelForm.date) }}
                       
                        <i class="fa fa-calendar" onclick="getcheckin()"></i>
                      </span>
                      <span class=" " id="checkOut">
                         {{ form_widget(hotelForm.returnDate) }}
                        <i class="fa fa-calendar" id="checkoutcalender" onclick="getcheckout()"> 	</i>
                      </span>
                      <span class="city guests" id="guests-box">
                      <input type="text" id="guests" value="{{ search.numAdult }} Guests, {{ search.numRooms }} Room" readonly/>
                      
                      <div id="popover-content" style="display: none">
                      
                     <div id="guestsclosediv" >
                      	<h5>Room 1</h5>
                      	  <!--  <button type="button" id="guestclose" class="guestclose" aria-label="Close" >
  								 	<span aria-hidden="true">&times;</span>
						</button> -->
						<a class="close btnguestclosecase guestclose" id="guestclose">&times;</a>
						 
						               	 
                      	<div class="guests-room" id="guests-room">
                      	 
                      	<div class="row">
                      		<div class="col-lg-8">

                      			<i class="adults-count">1</i> Adults <i class="guests-text">Above 18 years</i>


                      		</div>
                      		<div class="col-lg-4">
                      			<a class="adults input-group-addon" id="decrement" value="2" href="#">-</a>
                      			<a class="adults input-group-addon" id="increment" href="#">+</a>
                      		</div>                     	
                      	</div>
                      	<hr>
                      	<div class="row">
                      		<div class="col-lg-8">
                      			<i class="children-count">0</i> Children <i class="guests-text">Below 12 years</i>
                      		</div>
                      		<div class="col-lg-4">
                      			<a class="children input-group-addon" id="decrement" value="0" href="#">-</a>
                      			<a class="children input-group-addon" id="increment" href="#">+</a>
                      		</div>                     	
                      	</div> 
                      	<hr> 
                      	</div>
                      	<a href="#" class="add-room" value="1">Add Room</a>   
                      	</div>                   	                      	
                      </div>
                    
                      
                      
                       
                      </span>
                     
                      <span class="submit-btn">
                      	 {{ form_widget(hotelForm.numAdult) }}
                      	  {{ form_widget(hotelForm.numChildren) }}
                      	   {{ form_widget(hotelForm.numRooms) }}
                        <button class="btn btn-transparent">Search</button>                       
                      </span>
                     {{ form_end(hotelForm) }}
                     </div>
                                   
                               
                            </div><!-- end tab-pane -->

                          
                        </div><!-- end tab-content -->
                        {% endblock %}