{% extends 'page.html.twig' %}
{% block stylesheets %}

{% endblock %}
{% block javascripts %}
<script type="text/javascript">
$('.preferTime').timepicker({ 'scrollDefault': 'now' });

$('.adults').click(function(e){		
	e.preventDefault(); //STOP default action 
	 var id = $(this).attr('id');
	 var value = parseInt($(this).attr('value'));
    var numAdult = $(this).siblings("input[name=numAdult]");
	 var adults =parseInt(numAdult.val());
	 if (isNaN(adults)) { 
		 adults= 0
       } 
	 if(id=='decrement'){
		 adults-=1;
		 if(adults>=value) numAdult.val(adults); else exit();
	  }else{
		adults+=1;
	    if(adults<=20)  numAdult.val(adults); else exit();
		}	
});

$('.vehicle-icon').click(function(e){		
	e.preventDefault(); //STOP default action 
	 var id = $(this).attr('id');
	 var price = $(this).attr('value');
    var package = parseInt($(this).attr('title'));
    $('.vehicle'+package).removeClass('active');
    $(this).addClass('active');
    $('#vehicleIndex'+package).val(id);
    $('#price'+package).html(price);


  });


</script>
<script type="text/javascript">
		$(function(){
			$('#datetime2').appendDtpicker();
		});
		
		
	</script>
	<script type="text/javascript">
		$(function(){
			$('#datetime3').appendDtpicker();
		});
		
	</script>
	<script>
			$(document).ready(function(){
				$("#datetime3").change(function(){
					var first=$("#datetime2").val();
					var second=$("#datetime3").val();
					if(first===second)
					{
						alert("Reture date is inavlid please select returndate greaterthan pickupdate");
					}
					else{
						//alert("this is different string");
						//return;
					}
				});
			});
		</script>
{% endblock %}

{% block breadcrumb %}
	<div class="c1 breadcrumb text-left">
                        <div>
                        	<span class="glyphicon glyphicon-home" style="padding:5px;"></span><a href="{{ path('trip_site_management_homepage')}}">Home</a>
                        	<span><span class="glyphicon glyphicon-chevron-right" style="padding:5px;"></span>Bike List</span>
                      </div>
                    </div>
                   
                    <h3></h3>
{% endblock %}

{% block body %}

    <section class="section clearfix">
    
    	
        <div class="container">
            <div class="row">
            	<div class="col-md-3">
            		<div class="brand-color">
            			<h3 class="details">Modify Search</h3>
            			<hr>
            			<div class="row">
            				{{ form_start(form) }}
                             {{ form_errors(form) }}
                             {{ form_errors(form.date) }}
                             {{ form_errors(form.returndate) }}
								<div class="col-md-12 bikes-form-font">
                             	{{ form_label(form.location) }} 
                                {{ form_widget(form.location) }}
                                </div>
                             	<div class="col-md-12 bikes-form-font">
                             	{{ form_label(form.date) }} 
                                {{ form_widget(form.date, {'id': 'datetime2'}) }}
                                </div>
                                <div class="col-md-12 bikes-form-font">
                                {{ form_label(form.returndate) }} 
                                {{ form_widget(form.returndate, {'id': 'datetime3'}) }}
                                </div>
                                
                             {{ form_end(form) }}
            			</div>
            			 <p class="brandtype">Duration > <span class="black">{{ leftDays }} Days {{ hours }} Hours</span></p>                   
            			<hr>
            			
            		</div>
            	</div>
            	<div class="col-md-9">
            		<div class="row">
                        <div class="col-lg-12 col-sm-12 col-xs-12">
                            
                         
                     </div>    
                     <div class="col-lg-12 col-sm-12 col-xs-12">
                            {% for result in resultset %} 
                            <div class="col-md-4" >
                            <div>
                            <img src="{{asset('images/bikes/'~result.imgPath) }}" style="width: 100%;">
                            </div>
                            <div class="bike-background">                                
                                <h5 class="bike-grid-title"><a style="color: #0694b6;" href="{{ path('trip_site_management_view_bikes',{ 'url':result.locationUrl }) }}">{{ result.title }}</a></h5>
                            
                            <div class="row bikes">
                                		<div class="col-md-5 text-center" style="padding-right: -1px;">
                                		<span class="black1">{{ picdate|date("h:i A ") }}</span>
                                		<span class="black2">{{ picdate|date("d/m/Y ") }}</span>
                                         </div>
                                         <div class="col-md-2 text-center" >
                                         <label class="valign">To</label>
                                         </div>
                                         <div class="col-md-5 text-center" style="padding-right: 0px;">
                                         <span class="black1">{{ returndate|date("h:i A ") }}</span>
                                         <span class="black2">{{ returndate|date("d/m/Y ") }}</span>
                                         </div>
                                 	 </div>
                                <h6 style="text-align:center;color:#000"><i class="fa fa-inr" aria-hidden="true"></i> {{ result.price }}</h6>
                                 <span class="limit">({{ result.kmlimit }} km limit)</span>
                         		<div class="row">
                                         <div class="col-md-3" >
                                         </div>
                                         <div class="col-md-12" >
											<form action="{{ path('trip_site_management_homepage_bikes_submit') }}" method="get">
												{% set preferDate = picdate|date("d/m/Y h:i A") %}
												{% set returnDate = returndate|date("d/m/Y h:i A") %}
												<input type="hidden" name="id" class="form-control" value="{{ result.id }}"> 
												<input type="hidden" name="title" class="form-control" value="{{ result.title }}"> 
												<input type="hidden" name="pDate" class="form-control" value="{{ preferDate }}"> 
												<input type="hidden" name="rDate" class="form-control" value="{{ returnDate }}"> 
												<input type="hidden" name="price" class="form-control" value="{{ result.price }}"> 
												<input type="hidden" name="leftdays" class="form-control" value="{{ leftDays }}"> 
												<input type="hidden" name="hours" class="form-control" value="{{ hours }}"> 
												<input type="hidden" name="location" class="form-control" value="{{ location }}">
												<input type="hidden" name="countadd" class="form-control" value="1"> 
												<input type="hidden" name="count" class="form-control" value="{{ result.count }}"> 
												{% if (result.count <= 0) %}
                                          			<a class="btn btn-book-now view-bike" disabled>
                                                      Sold Out
                                                    </a>   
                                          	{% else %}
                                                <button type="submit" class="btn aligncenter view-bike">Rent Now</button>
                                            {% endif %}
											</form>
                                         </div>
                                         <div class="col-md-3" >
                                         </div>
                                 </div>
                         	</div>
                         </div>
                         {% endfor %}
                     </div>    
            	</div>
            	
            	
            </div>
        </div>
    </section>
{% endblock %}